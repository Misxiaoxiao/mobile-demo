{"remainingRequest":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js??ref--13-2!/Users/zuber/Desktop/document/company/mobile_ts/src/vuex/action.common.ts","dependencies":[{"path":"/Users/zuber/Desktop/document/company/mobile_ts/src/vuex/action.common.ts","mtime":1541491077888},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/asyncToGenerator\";\nexport var ActionBuilder = function ActionBuilder(options) {\n  var fetch =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(_ref, params) {\n      var commit, res, result;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              _context.prev = 1;\n              if (options.actionStart) commit(options.actionStart, params.data); // if has method, excute\n\n              if (!options.method) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 6;\n              return options.method(params.data);\n\n            case 6:\n              res = _context.sent;\n              result = res.data.result;\n              commit(options.actionSuccess, {\n                result: result\n              });\n              if (params.success) params.success(result);\n              _context.next = 14;\n              break;\n\n            case 12:\n              commit(options.actionSuccess, params.data);\n              if (params.success) params.success();\n\n            case 14:\n              _context.next = 20;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](1);\n              window.alert(_context.t0);\n              if (options.actionFail) commit(options.actionFail, _context.t0);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[1, 16]]);\n    }));\n\n    return function fetch(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return fetch;\n};",{"version":3,"sources":["/Users/zuber/Desktop/document/company/mobile_ts/src/vuex/action.common.ts"],"names":[],"mappings":";;OAiCO,IAAM,gBAAgB,SAAhB,aAAgB,CAAC,OAAD,EAA2B;AACpD,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAQ,uBAAgD,MAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAQ,oBAAR,QAAQ,MAAR;AAAA;AAEN,kBAAI,QAAQ,WAAZ,EAAyB,OAAO,QAAQ,WAAf,EAA4B,OAAO,IAAnC,EAFnB,CAGN;;AAHM,mBAIF,QAAQ,MAJN;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAKc,QAAQ,MAAR,CAAe,OAAO,IAAtB,CALd;;AAAA;AAKE,iBALF;AAME,oBANF,GAMW,IAAI,IAAJ,CAAS,MANpB;AAOF,qBAAO,QAAQ,aAAf,EAA8B;AAC1B,wBAAQ;AADkB,eAA9B;AAGA,kBAAI,OAAO,OAAX,EAAoB,OAAO,OAAP,CAAe,MAAf;AAVlB;AAAA;;AAAA;AAYF,qBAAO,QAAQ,aAAf,EAA8B,OAAO,IAArC;AACA,kBAAI,OAAO,OAAX,EAAoB,OAAO,OAAP;;AAblB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAgBN,qBAAO,KAAP;AACA,kBAAI,QAAQ,UAAZ,EAAwB,OAAO,QAAQ,UAAf;;AAjBlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAR;;AAAA;AAAA;AAAA;AAAA,KAAN;;AAoBA,SAAO,KAAP;AACH,CAtBM","sourcesContent":["import { ActionContext } from 'vuex'\nimport { AuthState } from './modules/auth/auth.store'\nimport { AccountState } from './modules/account/account.store'\nimport { CommonState } from './modules/common/common.store'\nimport { SearchState } from './modules/search/search.store'\nimport { LocateState } from './modules/locate/locate.store'\nimport { ResidenceState } from './modules/residence/residence.store'\nimport { UserState } from './modules/user/user.store'\n\ninterface RootState extends \n    AuthState,\n    AccountState,\n    CommonState,\n    SearchState,\n    LocateState,\n    ResidenceState,\n    UserState\n    {}\n\ninterface ActionOptions {\n    method?: any;\n    actionStart?: string;\n    actionSuccess: string;\n    actionFail?: string;\n}\n\ninterface ActionParams {\n    data?: any;\n    success?(res?: any): void;\n    fail?(e?: any): void;\n    [propName: string]: any;\n}\n\nexport const ActionBuilder = (options: ActionOptions) => {\n    const fetch = async ({commit}: ActionContext<RootState, any>, params: ActionParams) => {\n        try {\n            if (options.actionStart) commit(options.actionStart, params.data)\n            // if has method, excute\n            if (options.method) {\n                let res = await options.method(params.data)\n                let result = res.data.result\n                commit(options.actionSuccess, {\n                    result: result\n                })\n                if (params.success) params.success(result)\n            } else {\n                commit(options.actionSuccess, params.data)\n                if (params.success) params.success()\n            }\n        } catch (e) {\n            window.alert(e)\n            if (options.actionFail) commit(options.actionFail, e)\n        }\n    }\n    return fetch\n}"],"sourceRoot":""}]}