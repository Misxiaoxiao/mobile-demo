{"remainingRequest":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js??ref--13-2!/Users/zuber/Desktop/document/company/mobile_ts/src/store/actions.ts","dependencies":[{"path":"/Users/zuber/Desktop/document/company/mobile_ts/src/store/actions.ts","mtime":1541475742637},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport * as types from './mutation_type';\nimport Api from '@/api/index';\nvar Window = window;\nvar AMap = Window.AMap;\nvar GeolocationOptions = {\n  // enableHighAccuracy: true,// 是否使用高精度定位，默认:true\n  // timeout: 10000,          // 超过10秒后停止定位，默认：无穷大\n  maximumAge: 0,\n  convert: true\n};\nvar AGeolocation = new AMap.Geolocation(GeolocationOptions);\nvar actions = {\n  // 初始化数据\n  initState: function initState(_ref) {\n    var commit = _ref.commit;\n    Api.getInit().then(function (res) {\n      if (res) {\n        var regions = res.data.result.init_setting.region;\n        var lines = res.data.result.init_setting.subway_line;\n        commit(types.SET_INIT_REGIONS, {\n          regions: regions\n        });\n        commit(types.SET_INIT_LINES, {\n          lines: lines\n        });\n      }\n    });\n  },\n  // 设置定位城市 地址\n  setLocateCityAndAddress: function setLocateCityAndAddress(_ref2) {\n    var commit = _ref2.commit,\n        state = _ref2.state;\n    AGeolocation.getCurrentPosition(function (status, result) {\n      if (status === 'complete' && result.info === 'OK') {\n        var city = result.addressComponent.province.replace('市', '');\n        var address = \"\".concat(result.addressComponent.district, \"\\n                         \").concat(result.addressComponent.street, \"\\n                         \").concat(result.addressComponent.streetNumber);\n        commit(types.SET_LOCATE_CITY, {\n          city: city\n        });\n\n        if (city === state.currentCity) {\n          commit(types.SET_LOCATE_ADDRESS, {\n            address: address\n          });\n        } else {\n          commit(types.SET_LOCATE_ADDRESS, {\n            address: '你当前不在所选城市，无法选择附近'\n          });\n        }\n      } else {\n        commit(types.SET_LOCATE_CITY, {\n          city: '上海'\n        });\n        commit(types.SET_LOCATE_ADDRESS, {\n          address: '定位失败'\n        });\n      }\n    });\n  },\n  // 改变房间是否还有下一页\n  changeRoomHasNextPage: function changeRoomHasNextPage(_ref3, bool) {\n    var commit = _ref3.commit;\n    commit(types.CHANGE_ROOM_HAS_NEXT_PAGE, {\n      bool: bool\n    });\n  },\n  // isMore true 刷新  false 加载更多\n  searchRoom: function searchRoom(_ref4, _ref5) {\n    var commit = _ref4.commit,\n        state = _ref4.state;\n    var isMore = _ref5.isMore,\n        success = _ref5.success,\n        fail = _ref5.fail;\n    var region = state.longitude === -1 || state.latitude === -1 ? state.roomCurrentRegion : ''; // 如果传递经纬度则不传区域\n\n    var params = {\n      city: state.currentCity,\n      cost1: state.roomCostMin,\n      cost2: state.roomCostMax,\n      has_short_rent: isMore ? state.hasShortRent : '',\n      has_video: state.hasVideo,\n      region: region,\n      subway_line: state.subwayLine,\n      sex: state.roomGender,\n      type: state.type,\n      room_type_affirm: state.roomTypeAffirm,\n      sequence: isMore ? state.roomSequence : '',\n      longitude: state.longitude === -1 ? '' : state.longitude,\n      latitude: state.latitude === -1 ? '' : state.latitude\n    };\n\n    if (state.hasRoomNextPage) {\n      Api.getRoom({\n        params: params\n      }).then(function (res) {\n        var roomList = [];\n\n        if (res) {\n          var roomSequence = res.data.result.sequence;\n          var bool = res.data.result.has_next_page;\n\n          if (isMore) {\n            roomList = state.roomList.concat(res.data.result.items);\n          } else {\n            roomList = res.data.result.items;\n          }\n\n          commit(types.SET_ROOM_SEQUENCE, {\n            sequence: roomSequence\n          });\n          commit(types.SET_ROOM_LIST, {\n            list: roomList\n          });\n          commit(types.CHANGE_ROOM_HAS_NEXT_PAGE, {\n            bool: bool\n          });\n\n          if (success) {\n            success(!bool);\n          }\n        }\n      });\n    } else {\n      if (fail) {\n        fail();\n      }\n    }\n  },\n  // 打开城市搜索弹框\n  openCityPopup: function openCityPopup(_ref6) {\n    var commit = _ref6.commit;\n    commit(types.CLOSE_INPUT_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.OPEN_CITY_FILTER);\n  },\n  // 关闭城市搜索弹框\n  closeCityPopup: function closeCityPopup(_ref7) {\n    var commit = _ref7.commit;\n    commit(types.CLOSE_CITY_FILTER);\n  },\n  // 打开输入搜索弹框\n  openInputPopup: function openInputPopup(_ref8) {\n    var commit = _ref8.commit;\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.OPEN_INPUT_FILTER);\n  },\n  // 关闭输入搜索弹框\n  closeInputPopup: function closeInputPopup(_ref9) {\n    var commit = _ref9.commit;\n    commit(types.CLOSE_INPUT_FILTER);\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {\n      bool: false\n    });\n    commit(types.SET_INPUT_SEARCH_LIST, {\n      list: []\n    });\n  },\n  // 打开视频搜索框\n  openVideoPopup: function openVideoPopup(_ref10) {\n    var commit = _ref10.commit;\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.OPEN_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 关闭视频搜索\n  closeVideoPopup: function closeVideoPopup(_ref11) {\n    var commit = _ref11.commit;\n    commit(types.CLOSE_VIDEO_FILTER);\n  },\n  // 打开类型搜索\n  openTypePopup: function openTypePopup(_ref12) {\n    var commit = _ref12.commit;\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.OPEN_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 关闭类型搜索\n  closeTypePopup: function closeTypePopup(_ref13) {\n    var commit = _ref13.commit;\n    commit(types.CLOSE_TYPE_FILTER);\n  },\n  openOtherPopup: function openOtherPopup(_ref14) {\n    var commit = _ref14.commit;\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.OPEN_OTHER_FILTER);\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  closeOtherPopup: function closeOtherPopup(_ref15) {\n    var commit = _ref15.commit;\n    commit(types.CLOSE_OTHER_FILTER);\n  },\n  // 切换tab项目\n  changeSearchItem: function changeSearchItem(_ref16, _ref17) {\n    var commit = _ref16.commit;\n    var index = _ref17.index;\n    commit(types.SET_SEARCH_ITEM, {\n      index: index\n    }); // 关闭选择弹窗\n    // 关闭房源\n\n    commit(types.CLOSE_INPUT_FILTER);\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER); // 关闭求租\n\n    commit(types.CLOSE_SEARCH_DEMAND_SEX_FILTER);\n    commit(types.CLOSE_SEARCH_DEMAND_MONEY_FILTER);\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 改变当前城市\n  changeCurrentCity: function changeCurrentCity(_ref18, _ref19) {\n    var commit = _ref18.commit;\n    var city = _ref19.city;\n    commit(types.SET_CURRENT_CITY, {\n      city: city\n    });\n    commit(types.CLOSE_CITY_FILTER); // 修改房源的条件\n\n    commit(types.SET_ROOM_CURRENT_REGION, {\n      region: ''\n    });\n    commit(types.SET_ROOM_HAS_VIDEO, {\n      hasVideo: 0\n    });\n    commit(types.SET_ROOM_SEX, {\n      gender: ''\n    });\n    commit(types.SET_ROOM_TYPE, {\n      type: ''\n    });\n    commit(types.SET_ROOM_HAS_SHORT_RENT, {\n      bool: false\n    });\n    commit(types.SET_ROOM_TYPE_AFFIRM, {\n      arr: []\n    });\n    commit(types.SET_ROOM_MONEY, {\n      obj: {\n        min: '',\n        max: ''\n      }\n    }); // 修改求租的条件\n\n    commit(types.SET_DEMAND_CURRENT_REGION, {\n      region: ''\n    });\n    commit(types.SET_DEMAND_GENDER, {\n      gender: ''\n    });\n    commit(types.SET_DEMAND_MONEY, {\n      obj: {\n        min: '',\n        max: ''\n      }\n    });\n  },\n  // 改变当前区域\n  changeCurrentRegion: function changeCurrentRegion(_ref20, region) {\n    var commit = _ref20.commit;\n    commit(types.SET_ROOM_CURRENT_REGION, {\n      region: region\n    });\n    commit(types.SET_ROOM_SUBWAY_LINE, {\n      line: ''\n    });\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 改变当前地铁线\n  changeSubwayLine: function changeSubwayLine(_ref21, line) {\n    var commit = _ref21.commit;\n    commit(types.SET_ROOM_SUBWAY_LINE, {\n      line: line\n    });\n    commit(types.SET_ROOM_CURRENT_REGION, {\n      region: ''\n    });\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 改变是否有视频\n  changeHasVideo: function changeHasVideo(_ref22, hasVideo) {\n    var commit = _ref22.commit;\n    commit(types.SET_ROOM_HAS_VIDEO, {\n      hasVideo: hasVideo\n    });\n    commit(types.CLOSE_VIDEO_FILTER);\n  },\n  // 改变整租类型\n  changeType: function changeType(_ref23, type) {\n    var commit = _ref23.commit;\n    commit(types.SET_ROOM_TYPE, {\n      type: type\n    });\n    commit(types.CLOSE_TYPE_FILTER);\n  },\n  // 改变房源性别\n  changRoomSex: function changRoomSex(_ref24, gender) {\n    var commit = _ref24.commit;\n    commit(types.SET_ROOM_SEX, {\n      gender: gender\n    });\n  },\n  // 改变租期类型\n  changeHasShortRent: function changeHasShortRent(_ref25, bool) {\n    var commit = _ref25.commit;\n    commit(types.SET_ROOM_HAS_SHORT_RENT, {\n      bool: bool\n    });\n  },\n  // 改变房源类型\n  changeRoomTypeAffirm: function changeRoomTypeAffirm(_ref26, arr) {\n    var commit = _ref26.commit;\n    commit(types.SET_ROOM_TYPE_AFFIRM, {\n      arr: arr\n    });\n  },\n  // 改变租金\n  changeRoomMoney: function changeRoomMoney(_ref27, obj) {\n    var commit = _ref27.commit;\n    commit(types.SET_ROOM_MONEY, {\n      obj: obj\n    });\n  },\n  // 获取城市列表\n  getCityList: function getCityList(_ref28) {\n    var commit = _ref28.commit;\n    Api.getCityList().then(function (res) {\n      if (res) {\n        var cityList = res.data.result;\n        commit(types.SET_CITY_LIST, {\n          list: cityList\n        });\n      }\n    });\n  },\n  // 修改输入搜索列表\n  changeInputSearchList: function changeInputSearchList(_ref29, query) {\n    var commit = _ref29.commit,\n        state = _ref29.state;\n    var params = {\n      query: query,\n      region: state.currentCity + '市'\n    };\n    commit(types.SET_INPUT_SEARCH_LIST, {\n      list: []\n    });\n    Api.getMapSuggestion({\n      params: params\n    }).then(function (res) {\n      if (res) {\n        var list = res.data.result;\n        commit(types.SET_INPUT_SEARCH_LIST, {\n          list: list\n        });\n      }\n    });\n  },\n  // 修改经纬度\n  changeLongitudeAndLatitude: function changeLongitudeAndLatitude(_ref30, obj) {\n    var commit = _ref30.commit;\n    commit(types.SET_ROOM_LONGITUDE_LATITUDE, obj);\n    commit(types.SET_ROOM_CURRENT_REGION, {\n      region: obj.region\n    });\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {\n      bool: false\n    });\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 打开输入搜索列表\n  openInputSearchListBox: function openInputSearchListBox(_ref31) {\n    var commit = _ref31.commit;\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {\n      bool: true\n    });\n  },\n  // 关闭输入搜索列表\n  closeInputSearchListBox: function closeInputSearchListBox(_ref32) {\n    var commit = _ref32.commit;\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {\n      bool: false\n    });\n    commit(types.SET_INPUT_SEARCH_LIST, {\n      list: []\n    });\n  },\n  // 打开求租输入搜索框\n  openDemandInputPopup: function openDemandInputPopup(_ref33) {\n    var commit = _ref33.commit;\n    commit(types.OPEN_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 关闭求租输入搜索框\n  closeDemandInputPopup: function closeDemandInputPopup(_ref34) {\n    var commit = _ref34.commit;\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {\n      bool: false\n    });\n    commit(types.SET_INPUT_SEARCH_LIST, {\n      list: []\n    });\n  },\n  // 打开求租性别搜索框\n  openDemandSexPopup: function openDemandSexPopup(_ref35) {\n    var commit = _ref35.commit;\n    commit(types.OPEN_SEARCH_DEMAND_SEX_FILTER);\n  },\n  // 关闭求租性别搜索框\n  closeDemandSexPopup: function closeDemandSexPopup(_ref36) {\n    var commit = _ref36.commit;\n    commit(types.CLOSE_SEARCH_DEMAND_SEX_FILTER);\n  },\n  // 打开求租预算搜索框\n  openDemandMoneyPopup: function openDemandMoneyPopup(_ref37) {\n    var commit = _ref37.commit;\n    commit(types.OPEN_SEARCH_DEMAND_MONEY_FILTER);\n  },\n  // 关闭求租预算搜索框\n  closeDemandMoneyPopup: function closeDemandMoneyPopup(_ref38) {\n    var commit = _ref38.commit;\n    commit(types.CLOSE_SEARCH_DEMAND_MONEY_FILTER);\n  },\n  // 改变求租当前区域\n  changeDemandCurrentRegions: function changeDemandCurrentRegions(_ref39, region) {\n    var commit = _ref39.commit;\n    commit(types.SET_DEMAND_CURRENT_REGION, {\n      region: region\n    });\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 改变求租列表\n  searchDemand: function searchDemand(_ref40, _ref41) {\n    var commit = _ref40.commit,\n        state = _ref40.state;\n    var isMore = _ref41.isMore,\n        success = _ref41.success,\n        fail = _ref41.fail;\n    // console.log(isMore);\n    var params = {\n      city: state.currentCity,\n      sequence: state.demandSequence,\n      gender: state.demandGender,\n      cost1: state.demandMoney.min,\n      cost2: state.demandMoney.max,\n      longitude: state.demandLongitude,\n      latitude: state.demandLatitude\n    };\n\n    if (state.hasDemandNextPage) {\n      Api.getDemand({\n        params: params\n      }).then(function (res) {\n        if (res) {\n          var demandList = [];\n          var sequence = res.data.result.sequence;\n          var bool = res.data.result.has_next_page;\n\n          if (isMore) {\n            demandList = state.demandList.concat(res.data.result.items);\n          } else {\n            demandList = res.data.result.items;\n          }\n\n          commit(types.SET_DEMAND_SEQUENCE, {\n            sequence: sequence\n          });\n          commit(types.SET_DEMAND_LIST, {\n            list: demandList\n          });\n          commit(types.SET_DEMAND_HAS_NEXT_PAGE, {\n            bool: bool\n          });\n\n          if (success) {\n            success(!bool);\n          }\n        }\n      });\n    } else {\n      if (fail) {\n        fail();\n      }\n    }\n  },\n  // 改变求租的经纬度\n  changeDemandLongitudeAndLatitude: function changeDemandLongitudeAndLatitude(_ref42, obj) {\n    var commit = _ref42.commit;\n    commit(types.SET_DEMAND_LONGITUDE_LATITUDE, obj);\n    commit(types.SET_DEMAND_CURRENT_REGION, {\n      region: obj.region\n    });\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {\n      bool: false\n    });\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 改变求租的性别条件\n  changeDemandGender: function changeDemandGender(_ref43, gender) {\n    var commit = _ref43.commit;\n    commit(types.SET_DEMAND_GENDER, {\n      gender: gender\n    });\n  },\n  // 改变求租预算条件\n  changeDemandMoney: function changeDemandMoney(_ref44, obj) {\n    var commit = _ref44.commit;\n    commit(types.SET_DEMAND_MONEY, obj);\n  },\n  // 改变求租是否有下一页\n  changeDemandHasNextPage: function changeDemandHasNextPage(_ref45, bool) {\n    var commit = _ref45.commit;\n    commit(types.SET_DEMAND_HAS_NEXT_PAGE, {\n      bool: bool\n    });\n  }\n};\nexport default actions;",{"version":3,"sources":["/Users/zuber/Desktop/document/company/mobile_ts/src/store/actions.ts"],"names":[],"mappings":"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","sourcesContent":["import { ActionTree } from 'vuex';\nimport * as types from './mutation_type';\nimport {State, state} from './state';\nimport Api from '@/api/index';\n\nconst Window: any = window;\nconst AMap = Window.AMap;\nconst GeolocationOptions = {\n  // enableHighAccuracy: true,// 是否使用高精度定位，默认:true\n  // timeout: 10000,          // 超过10秒后停止定位，默认：无穷大\n  maximumAge: 0, // 3600000,           // 定位结果缓存0毫秒，默认：0\n  convert: true,           // 自动偏移坐标，偏移后的坐标为高德坐标，默认：true\n  // showButton: true,        // 显示定位按钮，默认：true\n  // buttonPosition: 'LB',    // 定位按钮停靠位置，默认：'LB'，左下角\n  // buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)\n  // showMarker: true,        // 定位成功后在定位到的位置显示点标记，默认：true\n  // showCircle: true,        // 定位成功后用圆圈表示定位精度范围，默认：true\n  // panToLocation: true,     // 定位成功后将定位到的位置作为地图中心点，默认：true\n  // zoomToAccuracy:true      // 定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\n};\nconst AGeolocation = new AMap.Geolocation(GeolocationOptions);\n\nconst actions: ActionTree<State, any> = {\n  // 初始化数据\n  initState(\n    {commit},\n  ): void {\n    Api.getInit()\n      .then((res: any) => {\n        if (res) {\n          const regions = res.data.result.init_setting.region;\n          const lines = res.data.result.init_setting.subway_line;\n          commit(types.SET_INIT_REGIONS, {regions});\n          commit(types.SET_INIT_LINES, {lines});\n        }\n      });\n  },\n  // 设置定位城市 地址\n  setLocateCityAndAddress(\n    {commit, state},\n  ): void {\n    AGeolocation.getCurrentPosition((status: any, result: any) => {\n      if (status === 'complete' && result.info === 'OK') {\n        const city = result.addressComponent.province.replace('市', '');\n        const address = `${result.addressComponent.district}\n                         ${result.addressComponent.street}\n                         ${result.addressComponent.streetNumber}`;\n        commit(types.SET_LOCATE_CITY, {\n          city,\n        });\n        if (city === state.currentCity) {\n          commit(types.SET_LOCATE_ADDRESS, {\n            address,\n          });\n        } else {\n          commit(types.SET_LOCATE_ADDRESS, {\n            address: '你当前不在所选城市，无法选择附近',\n          });\n        }\n      } else {\n        commit(types.SET_LOCATE_CITY, {\n          city: '上海',\n        });\n        commit(types.SET_LOCATE_ADDRESS, {\n          address: '定位失败',\n        });\n      }\n    });\n  },\n  // 改变房间是否还有下一页\n  changeRoomHasNextPage(\n    {commit},\n    bool: boolean,\n  ): void {\n    commit(types.CHANGE_ROOM_HAS_NEXT_PAGE, {bool});\n  },\n  // isMore true 刷新  false 加载更多\n  searchRoom(\n    {commit, state},\n    {isMore, success, fail}: {isMore?: boolean, success?: any, fail?: any},\n  ): void {\n    const region = state.longitude === -1 || state.latitude === -1 ? state.roomCurrentRegion : ''; // 如果传递经纬度则不传区域\n    const params = {\n      city: state.currentCity,\n      cost1: state.roomCostMin,\n      cost2: state.roomCostMax,\n      has_short_rent: isMore ? state.hasShortRent : '',\n      has_video: state.hasVideo,\n      region,\n      subway_line: state.subwayLine,\n      sex: state.roomGender,\n      type: state.type,\n      room_type_affirm: state.roomTypeAffirm,\n      sequence: isMore ? state.roomSequence : '',\n      longitude: state.longitude === -1 ? '' : state.longitude,\n      latitude: state.latitude === -1 ? '' : state.latitude,\n    };\n    if (state.hasRoomNextPage) {\n      Api.getRoom({params})\n      .then((res) => {\n        let roomList: any = [];\n        if (res) {\n          const roomSequence = res.data.result.sequence;\n          const bool = res.data.result.has_next_page;\n          if (isMore) {\n            roomList = state.roomList.concat(res.data.result.items);\n          } else {\n            roomList = res.data.result.items;\n          }\n          commit(types.SET_ROOM_SEQUENCE, {sequence: roomSequence});\n          commit(types.SET_ROOM_LIST, {list: roomList});\n          commit(types.CHANGE_ROOM_HAS_NEXT_PAGE, {bool});\n          if (success) {\n            success(!bool);\n          }\n        }\n      });\n    } else {\n      if (fail) {\n        fail();\n      }\n    }\n  },\n  // 打开城市搜索弹框\n  openCityPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_INPUT_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.OPEN_CITY_FILTER);\n  },\n  // 关闭城市搜索弹框\n  closeCityPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_CITY_FILTER);\n  },\n  // 打开输入搜索弹框\n  openInputPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.OPEN_INPUT_FILTER);\n  },\n  // 关闭输入搜索弹框\n  closeInputPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_INPUT_FILTER);\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {bool: false});\n    commit(types.SET_INPUT_SEARCH_LIST, {list: []});\n  },\n  // 打开视频搜索框\n  openVideoPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.OPEN_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 关闭视频搜索\n  closeVideoPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_VIDEO_FILTER);\n  },\n  // 打开类型搜索\n  openTypePopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.OPEN_TYPE_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 关闭类型搜索\n  closeTypePopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_TYPE_FILTER);\n  },\n  openOtherPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.OPEN_OTHER_FILTER);\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  closeOtherPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_OTHER_FILTER);\n  },\n  // 切换tab项目\n  changeSearchItem(\n    {commit},\n    {index}: {index: number},\n  ): void {\n    commit(types.SET_SEARCH_ITEM, {\n      index,\n    });\n    // 关闭选择弹窗\n    // 关闭房源\n    commit(types.CLOSE_INPUT_FILTER);\n    commit(types.CLOSE_CITY_FILTER);\n    commit(types.CLOSE_OTHER_FILTER);\n    commit(types.CLOSE_TYPE_FILTER);\n    commit(types.CLOSE_VIDEO_FILTER);\n    // 关闭求租\n    commit(types.CLOSE_SEARCH_DEMAND_SEX_FILTER);\n    commit(types.CLOSE_SEARCH_DEMAND_MONEY_FILTER);\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 改变当前城市\n  changeCurrentCity(\n    {commit},\n    {city}: {city: string},\n  ): void {\n    commit(types.SET_CURRENT_CITY, {\n      city,\n    });\n    commit(types.CLOSE_CITY_FILTER);\n    // 修改房源的条件\n    commit(types.SET_ROOM_CURRENT_REGION, {region: ''});\n    commit(types.SET_ROOM_HAS_VIDEO, {hasVideo: 0});\n    commit(types.SET_ROOM_SEX, {gender: ''});\n    commit(types.SET_ROOM_TYPE, {type: ''});\n    commit(types.SET_ROOM_HAS_SHORT_RENT, {bool: false});\n    commit(types.SET_ROOM_TYPE_AFFIRM, {arr: []});\n    commit(types.SET_ROOM_MONEY, {obj: {min: '', max: ''}});\n    // 修改求租的条件\n    commit(types.SET_DEMAND_CURRENT_REGION, {region: ''});\n    commit(types.SET_DEMAND_GENDER, {gender: ''});\n    commit(types.SET_DEMAND_MONEY, {obj: {min: '', max: ''}});\n  },\n  // 改变当前区域\n  changeCurrentRegion(\n    {commit},\n    region: string,\n  ): void {\n    commit(types.SET_ROOM_CURRENT_REGION, {region});\n    commit(types.SET_ROOM_SUBWAY_LINE, {line: ''});\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 改变当前地铁线\n  changeSubwayLine(\n    {commit},\n    line: string,\n  ): void {\n    commit(types.SET_ROOM_SUBWAY_LINE, {line});\n    commit(types.SET_ROOM_CURRENT_REGION, {region: ''});\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 改变是否有视频\n  changeHasVideo(\n    {commit},\n    hasVideo: number,\n  ): void {\n    commit(types.SET_ROOM_HAS_VIDEO, {hasVideo});\n    commit(types.CLOSE_VIDEO_FILTER);\n  },\n  // 改变整租类型\n  changeType(\n    {commit},\n    type: any,\n  ): void {\n    commit(types.SET_ROOM_TYPE, {type});\n    commit(types.CLOSE_TYPE_FILTER);\n  },\n  // 改变房源性别\n  changRoomSex(\n    {commit},\n    gender: string,\n  ): void {\n    commit(types.SET_ROOM_SEX, {gender});\n  },\n  // 改变租期类型\n  changeHasShortRent(\n    {commit},\n    bool: boolean,\n  ): void {\n    commit(types.SET_ROOM_HAS_SHORT_RENT, {bool});\n  },\n  // 改变房源类型\n  changeRoomTypeAffirm(\n    {commit},\n    arr: any[],\n  ): void {\n    commit(types.SET_ROOM_TYPE_AFFIRM, {arr});\n  },\n  // 改变租金\n  changeRoomMoney(\n    {commit},\n    obj: any,\n  ): void {\n    commit(types.SET_ROOM_MONEY, {obj});\n  },\n  // 获取城市列表\n  getCityList(\n    {commit},\n  ): void {\n    Api.getCityList()\n      .then((res: any) => {\n        if (res) {\n          const cityList = res.data.result;\n          commit(types.SET_CITY_LIST, {\n            list: cityList,\n          });\n        }\n      });\n  },\n  // 修改输入搜索列表\n  changeInputSearchList(\n    {commit, state},\n    query: string,\n  ): void {\n    const params = {\n      query,\n      region: state.currentCity + '市',\n    };\n    commit(types.SET_INPUT_SEARCH_LIST, {list: []});\n    Api.getMapSuggestion({params})\n      .then((res: any) => {\n        if (res) {\n          const list = res.data.result;\n          commit(types.SET_INPUT_SEARCH_LIST, {list});\n        }\n      });\n  },\n  // 修改经纬度\n  changeLongitudeAndLatitude(\n    {commit},\n    obj: any,\n  ): void {\n    commit(types.SET_ROOM_LONGITUDE_LATITUDE, obj);\n    commit(types.SET_ROOM_CURRENT_REGION, {region: obj.region});\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {bool: false});\n    commit(types.CLOSE_INPUT_FILTER);\n  },\n  // 打开输入搜索列表\n  openInputSearchListBox(\n    {commit},\n  ): void {\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {bool: true});\n  },\n  // 关闭输入搜索列表\n  closeInputSearchListBox(\n    {commit},\n  ): void {\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {bool: false});\n    commit(types.SET_INPUT_SEARCH_LIST, {list: []});\n  },\n  // 打开求租输入搜索框\n  openDemandInputPopup(\n    {commit},\n  ): void {\n    commit(types.OPEN_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 关闭求租输入搜索框\n  closeDemandInputPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {bool: false});\n    commit(types.SET_INPUT_SEARCH_LIST, {list: []});\n  },\n  // 打开求租性别搜索框\n  openDemandSexPopup(\n    {commit},\n  ): void {\n    commit(types.OPEN_SEARCH_DEMAND_SEX_FILTER);\n  },\n  // 关闭求租性别搜索框\n  closeDemandSexPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_SEARCH_DEMAND_SEX_FILTER);\n  },\n  // 打开求租预算搜索框\n  openDemandMoneyPopup(\n    {commit},\n  ): void {\n    commit(types.OPEN_SEARCH_DEMAND_MONEY_FILTER);\n  },\n  // 关闭求租预算搜索框\n  closeDemandMoneyPopup(\n    {commit},\n  ): void {\n    commit(types.CLOSE_SEARCH_DEMAND_MONEY_FILTER);\n  },\n  // 改变求租当前区域\n  changeDemandCurrentRegions(\n    {commit},\n    region: string,\n  ): void {\n    commit(types.SET_DEMAND_CURRENT_REGION, {region});\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 改变求租列表\n  searchDemand(\n    {commit, state},\n    {isMore, success, fail}: {isMore?: boolean, success?: any, fail?: any},\n  ): void {\n    // console.log(isMore);\n    const params = {\n      city: state.currentCity,\n      sequence: state.demandSequence,\n      gender: state.demandGender,\n      cost1: state.demandMoney.min,\n      cost2: state.demandMoney.max,\n      longitude: state.demandLongitude,\n      latitude: state.demandLatitude,\n    };\n    if (state.hasDemandNextPage) {\n      Api.getDemand({params})\n      .then((res) => {\n        if (res) {\n          let demandList: any = [];\n          const sequence = res.data.result.sequence;\n          const bool = res.data.result.has_next_page;\n          if (isMore) {\n            demandList = state.demandList.concat(res.data.result.items);\n          } else {\n            demandList = res.data.result.items;\n          }\n          commit(types.SET_DEMAND_SEQUENCE, {sequence});\n          commit(types.SET_DEMAND_LIST, {list: demandList});\n          commit(types.SET_DEMAND_HAS_NEXT_PAGE, {bool});\n          if (success) {\n            success(!bool);\n          }\n        }\n      });\n    } else {\n      if (fail) {\n        fail();\n      }\n    }\n  },\n  // 改变求租的经纬度\n  changeDemandLongitudeAndLatitude(\n    {commit},\n    obj: any,\n  ): void {\n    commit(types.SET_DEMAND_LONGITUDE_LATITUDE, obj);\n    commit(types.SET_DEMAND_CURRENT_REGION, {region: obj.region});\n    commit(types.SET_OPEN_INPUT_SEARCH_LIST, {bool: false});\n    commit(types.CLOSE_SEARCH_DEMAND_INPUT_FILTER);\n  },\n  // 改变求租的性别条件\n  changeDemandGender(\n    {commit},\n    gender: string,\n  ): void {\n    commit(types.SET_DEMAND_GENDER, {gender});\n  },\n  // 改变求租预算条件\n  changeDemandMoney(\n    {commit},\n    obj: any,\n  ): void {\n    commit(types.SET_DEMAND_MONEY, obj);\n  },\n  // 改变求租是否有下一页\n  changeDemandHasNextPage(\n    {commit},\n    bool: boolean,\n  ): void {\n    commit(types.SET_DEMAND_HAS_NEXT_PAGE, {bool});\n  },\n};\n\nexport default actions;\n"],"sourceRoot":""}]}