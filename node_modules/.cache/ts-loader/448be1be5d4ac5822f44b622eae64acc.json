{"remainingRequest":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js??ref--13-2!/Users/zuber/Desktop/document/company/mobile_ts/src/interface/api/signature.ts","dependencies":[{"path":"/Users/zuber/Desktop/document/company/mobile_ts/src/interface/api/signature.ts","mtime":1541491029932},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/classCallCheck\";\nimport _createClass from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/createClass\";\nimport md5 from 'blueimp-md5';\nvar SCENE = '2567a5ec9705eb7ac2c984033e06189d';\n\nvar timeStamp = function timeStamp() {\n  return Math.round(new Date().getTime() / 1000);\n};\n\nvar Signature =\n/*#__PURE__*/\nfunction () {\n  function Signature(token, version, deployKey) {\n    _classCallCheck(this, Signature);\n\n    this.token = token;\n    this._scene = SCENE;\n    this._version = version;\n    this._key = deployKey ? deployKey : '';\n  }\n\n  _createClass(Signature, [{\n    key: \"generate\",\n    value: function generate(route, method, params) {\n      var _timestamp = timeStamp();\n\n      var _secret = this.token.getValue('secret');\n\n      var _oauth = this.token.getValue('token');\n\n      var _method = method ? method.toLowerCase() : 'get';\n\n      var _params = _method === 'get' || _method === 'delete' ? '{}' : JSON.stringify(params);\n\n      var _source = 'request_url=' + this._version + route + '&content=' + _params + '&request_method=' + _method + '&timestamp=' + _timestamp + '&secret=' + (_secret ? _secret : '');\n\n      var _signature = md5(_source);\n\n      return 'timestamp=' + _timestamp + ';oauth2=' + _oauth + ';signature=' + _signature + ';scene=' + this._scene + ';deployKey=' + this._key;\n    }\n  }]);\n\n  return Signature;\n}();\n\nexport { Signature as default };",{"version":3,"sources":["/Users/zuber/Desktop/document/company/mobile_ts/src/interface/api/signature.ts"],"names":[],"mappings":";;AACA,OAAO,GAAP,MAAgB,aAAhB;AAEA,IAAM,QAAgB,kCAAtB;;AAEA,IAAM,YAA0B,SAA1B,SAA0B,GAAA;AAC5B,SAAO,KAAK,KAAL,CAAW,IAAI,IAAJ,GAAW,OAAX,KAAuB,IAAlC,CAAP;AACH,CAFD;;IAIqB,S;;;AAKjB,qBAAa,KAAb,EAA2B,OAA3B,EAA4C,SAA5C,EAA8D;AAAA;;AAC1D,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,MAAL,GAAc,KAAd;AACA,SAAK,QAAL,GAAgB,OAAhB;AACA,SAAK,IAAL,GAAY,YAAY,SAAZ,GAAwB,EAApC;AACH;;;;6BACS,K,EAAe,M,EAA4B,M,EAAW;AAC5D,UAAI,aAAa,WAAjB;;AACA,UAAI,UAAU,KAAK,KAAL,CAAW,QAAX,CAAoB,QAApB,CAAd;;AACA,UAAI,SAAS,KAAK,KAAL,CAAW,QAAX,CAAoB,OAApB,CAAb;;AACA,UAAI,UAAU,SAAS,OAAO,WAAP,EAAT,GAAgC,KAA9C;;AACA,UAAI,UAAW,YAAY,KAAZ,IAAqB,YAAY,QAAlC,GAA8C,IAA9C,GAAqD,KAAK,SAAL,CAAe,MAAf,CAAnE;;AAEA,UAAI,UAAU,iBAAiB,KAAK,QAAtB,GAAiC,KAAjC,GACA,WADA,GACc,OADd,GAEA,kBAFA,GAEqB,OAFrB,GAGA,aAHA,GAGgB,UAHhB,GAIA,UAJA,IAIc,UAAU,OAAV,GAAoB,EAJlC,CAAd;;AAMA,UAAI,aAAa,IAAI,OAAJ,CAAjB;;AAEA,aAAO,eAAe,UAAf,GAA4B,UAA5B,GAAyC,MAAzC,GAAkD,aAAlD,GAAkE,UAAlE,GAA+E,SAA/E,GAA2F,KAAK,MAAhG,GAAyG,aAAzG,GAAyH,KAAK,IAArI;AACH;;;;;;SA3BgB,S","sourcesContent":["import Token from './token'\nimport md5 from 'blueimp-md5'\n\nconst SCENE: string = '2567a5ec9705eb7ac2c984033e06189d'\n\nconst timeStamp: () => number = function (): number {\n    return Math.round(new Date().getTime() / 1000);\n};\n\nexport default class Signature {\n    private _scene: string;\n    private _version: string;\n    private _key: string;\n    token: Token;\n    constructor (token: Token, version: string, deployKey?: string) {\n        this.token = token;\n        this._scene = SCENE;\n        this._version = version;\n        this._key = deployKey ? deployKey : '';\n    }\n    generate (route: string, method: string | undefined, params: any): string {\n        let _timestamp = timeStamp();\n        let _secret = this.token.getValue('secret');\n        let _oauth = this.token.getValue('token');\n        let _method = method ? method.toLowerCase() : 'get' ;\n        let _params = (_method === 'get' || _method === 'delete') ? '{}' : JSON.stringify(params);\n\n        let _source = 'request_url=' + this._version + route +\n                      '&content=' + _params +\n                      '&request_method=' + _method +\n                      '&timestamp=' + _timestamp +\n                      '&secret=' + (_secret ? _secret : '');\n\n        let _signature = md5(_source);\n\n        return 'timestamp=' + _timestamp + ';oauth2=' + _oauth + ';signature=' + _signature + ';scene=' + this._scene + ';deployKey=' + this._key;\n    }\n}"],"sourceRoot":""}]}