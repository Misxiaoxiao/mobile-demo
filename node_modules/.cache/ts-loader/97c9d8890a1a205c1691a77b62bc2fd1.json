{"remainingRequest":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js??ref--13-2!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zuber/Desktop/document/company/mobile_ts/src/components/common/scroll.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/zuber/Desktop/document/company/mobile_ts/src/components/common/scroll.vue","mtime":1541121876622},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/classCallCheck\";\nimport _inherits from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/inherits\";\nimport _createClass from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/createClass\";\nimport _possibleConstructorReturn from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/getPrototypeOf\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport tween from '@/utils/tween';\n\nvar Scroll =\n/*#__PURE__*/\nfunction (_Vue) {\n  function Scroll() {\n    var _this;\n\n    _classCallCheck(this, Scroll);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Scroll).apply(this, arguments));\n    _this.pageX = 0;\n    _this.pageY = 0;\n    _this.state = 0;\n    _this.scrollPosition = 0;\n    _this.myScroll = null;\n    _this.myScrollList = null;\n    _this.top = 0;\n    _this.aspect = 0; // 1 上下  2 左右\n\n    _this.listHeight = 0;\n    return _this;\n  }\n\n  _createClass(Scroll, [{\n    key: \"scrollTop\",\n    value: function scrollTop(top) {\n      this.myScroll.scrollTop = top;\n    } // 刷新中： 1\n    // 松开刷新： 2\n    // 刷新完成： 3\n    // 加载中： 4\n    // 加载完成： 5\n    // 下拉刷新： 6\n    // 没有更多： 7\n\n  }, {\n    key: \"setState\",\n    value: function setState(index) {\n      var _this2 = this;\n\n      this.state = index;\n\n      if (index === 5 || index === 3) {\n        setTimeout(function () {\n          _this2.state = 0;\n          var timer = null;\n          var that = _this2;\n          var b = 50;\n          var c = 100;\n          var d = 100;\n          var t = 0;\n          cancelAnimationFrame(timer);\n          timer = requestAnimationFrame(function fn() {\n            var oTop = that.top;\n\n            if (that.top > 0) {\n              that.top = Math.ceil(tween.Quart.easeInOut(10, oTop, 8, 10)) - 15;\n              timer = requestAnimationFrame(fn);\n            } else {\n              cancelAnimationFrame(timer);\n              that.top = 0;\n            }\n          });\n        }, 500);\n      }\n    } // 触摸事件\n\n  }, {\n    key: \"touchStart\",\n    value: function touchStart(e) {\n      this.pageX = e.targetTouches[0].pageX;\n      this.pageY = e.targetTouches[0].pageY;\n    } // 触摸滑动事件\n\n  }, {\n    key: \"touchMove\",\n    value: function touchMove(e) {\n      this.scrollPosition = this.myScroll.scrollTop; // 获取滚动条位置\n\n      if (this.scrollState && e.targetTouches[0].pageY > this.pageY) {\n        // 向上滑动\n        this.aspect = 2;\n\n        if (this.myScroll.scrollTop === 0) {\n          var diff = e.targetTouches[0].pageY - this.pageY - this.scrollPosition;\n          this.top = Math.pow(diff, 0.9);\n          var ranget = diff / document.body.clientHeight * 100; // 计算在屏幕上滑动了多少\n\n          if (ranget > 20) {\n            this.state = 2;\n          } else if (ranget < 15) {\n            this.state = 6;\n          }\n\n          e.preventDefault();\n        }\n      } else if (this.scrollState && this.state !== 4) {\n        // 向下滑动\n        this.aspect = 1;\n      }\n    }\n  }, {\n    key: \"touchEnd\",\n    value: function touchEnd(e) {\n      if (this.aspect === 2 && this.state === 2 || this.state === 1) {\n        // 上拉处理\n        this.top = 100;\n        this.state = 1;\n        this.topCallback();\n      } else if (this.aspect === 2) {\n        this.state = 0;\n        this.top = 0;\n      }\n    }\n  }, {\n    key: \"onScroll\",\n    value: function onScroll(e) {\n      var listHeight = this.myScrollList.offsetHeight; // 列表总高度\n\n      var listScrollTop = e.target.scrollTop + this.myScroll.offsetHeight; // 当前滚动\n\n      if (this.state === 0 && listHeight - listScrollTop < 100) {\n        this.bottomCallback();\n      }\n\n      if (this.getScrollTop) {\n        this.getScrollTop(e.target.scrollTop); // 返回x, y\n      }\n    }\n  }, {\n    key: \"topCallback\",\n    value: function topCallback() {\n      this.onRefresh(this.state);\n    }\n  }, {\n    key: \"bottomCallback\",\n    value: function bottomCallback() {\n      if (this.state !== 7) {\n        this.state = 4;\n        this.onPull(this.state);\n      }\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {\n      this.myScroll = this.$refs.myScroll; // 获取滑条dom\n\n      this.myScrollList = this.myScroll.children[1]; // 获取列表dom\n    }\n  }]);\n\n  _inherits(Scroll, _Vue);\n\n  return Scroll;\n}(Vue);\n\ntslib_1.__decorate([Prop({\n  default: {}\n})], Scroll.prototype, \"onRefresh\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: {}\n})], Scroll.prototype, \"onPull\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: {}\n})], Scroll.prototype, \"getScrollTop\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: true\n})], Scroll.prototype, \"scrollState\", void 0);\n\nScroll = tslib_1.__decorate([Component], Scroll);\nexport default Scroll;",{"version":3,"sources":["/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zuber/Desktop/document/company/mobile_ts/src/components/common/scroll.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { State, Action } from 'vuex-class';\nimport tween from '@/utils/tween';\n\n@Component\nexport default class Scroll extends Vue {\n  private Load: any;\n  private pageX: number = 0;\n  private pageY: number = 0;\n  private state: number = 0;\n  private scrollPosition: number = 0;\n  private myScroll: any = null;\n  private myScrollList: any = null;\n  private top: number = 0;\n  private aspect: number = 0; // 1 上下  2 左右\n  private listHeight: number = 0;\n  // @Prop({default: {}}) private page!: any;\n  @Prop({default: {}}) private onRefresh!: any;\n  @Prop({default: {}}) private onPull!: any;\n  @Prop({default: {}}) private getScrollTop!: any;\n  // @Prop({default: {}}) private setScrollPage!: any;\n  @Prop({default: true}) private scrollState?: boolean;\n  private scrollTop(top: number): void {\n    this.myScroll.scrollTop = top;\n  }\n  // 刷新中： 1\n  // 松开刷新： 2\n  // 刷新完成： 3\n  // 加载中： 4\n  // 加载完成： 5\n  // 下拉刷新： 6\n  // 没有更多： 7\n  private setState(index: number) {\n    this.state = index;\n    if (index === 5 || index === 3) {\n      setTimeout(() => {\n        this.state = 0;\n        let timer: any = null;\n        const that = this;\n        const b = 50;\n        const c = 100;\n        const d = 100;\n        const t = 0;\n        cancelAnimationFrame(timer);\n        timer = requestAnimationFrame(function fn() {\n          const oTop: number = that.top;\n          if (that.top > 0) {\n            that.top = Math.ceil(tween.Quart.easeInOut(10, oTop, 8, 10)) - 15;\n            timer = requestAnimationFrame(fn);\n          } else {\n            cancelAnimationFrame(timer);\n            that.top = 0;\n          }\n        });\n      }, 500);\n    }\n  }\n  // 触摸事件\n  private touchStart(e: any): void {\n    this.pageX = e.targetTouches[0].pageX;\n    this.pageY = e.targetTouches[0].pageY;\n  }\n  // 触摸滑动事件\n  private touchMove(e: any): void {\n    this.scrollPosition = this.myScroll.scrollTop; // 获取滚动条位置\n    if (this.scrollState && (e.targetTouches[0].pageY > this.pageY)) { // 向上滑动\n      this.aspect = 2;\n      if (this.myScroll.scrollTop === 0) {\n        const diff = e.targetTouches[0].pageY - this.pageY - this.scrollPosition;\n        this.top = Math.pow(diff, 0.9);\n        const ranget = diff / document.body.clientHeight * 100; // 计算在屏幕上滑动了多少\n        if (ranget > 20) {\n          this.state = 2;\n        } else if (ranget < 15) {\n          this.state = 6;\n        }\n        e.preventDefault();\n      }\n    } else if (this.scrollState && this.state !== 4) { // 向下滑动\n      this.aspect = 1;\n    }\n  }\n  private touchEnd(e: any): void {\n    if (this.aspect === 2 && this.state === 2 || this.state === 1) { // 上拉处理\n      this.top = 100;\n      this.state = 1;\n      this.topCallback();\n    } else if (this.aspect === 2) {\n      this.state = 0;\n      this.top = 0;\n    }\n  }\n  private onScroll(e: any): void {\n    const listHeight = this.myScrollList.offsetHeight; // 列表总高度\n    const listScrollTop = e.target.scrollTop + this.myScroll.offsetHeight; // 当前滚动\n    if (this.state === 0 && listHeight - listScrollTop < 100) {\n      this.bottomCallback();\n    }\n    if (this.getScrollTop) {\n      this.getScrollTop(e.target.scrollTop); // 返回x, y\n    }\n  }\n  private topCallback(): void {\n    this.onRefresh(this.state);\n  }\n  private bottomCallback(): void {\n    if (this.state !== 7) {\n      this.state = 4;\n      this.onPull(this.state);\n    }\n  }\n  private mounted(): void {\n    this.myScroll = this.$refs.myScroll; // 获取滑条dom\n    this.myScrollList = this.myScroll.children[1]; // 获取列表dom\n  }\n}\n"],"sourceRoot":""}]}