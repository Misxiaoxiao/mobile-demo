{"remainingRequest":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js!/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js??ref--13-2!/Users/zuber/Desktop/document/company/mobile_ts/src/interface/api/resource.ts","dependencies":[{"path":"/Users/zuber/Desktop/document/company/mobile_ts/src/interface/api/resource.ts","mtime":1541491029932},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/classCallCheck\";\nimport _inherits from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/inherits\";\nimport _createClass from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/createClass\";\nimport _possibleConstructorReturn from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/getPrototypeOf\";\nimport _get from \"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/@babel/runtime/helpers/builtin/es6/get\";\nimport axios from 'axios';\nimport Signature from './signature';\n\nvar ApiResource =\n/*#__PURE__*/\nfunction (_Signature) {\n  function ApiResource(baseUrl, version, token, deployKey) {\n    var _this;\n\n    _classCallCheck(this, ApiResource);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ApiResource).call(this, token, version, deployKey));\n    _this.baseUrl = baseUrl;\n    return _this;\n  }\n\n  _createClass(ApiResource, [{\n    key: \"handle\",\n    value: function handle(res) {\n      if (res.status === 200) {\n        switch (res.data.code) {\n          case 0:\n            return res.data.result ? res : Promise.reject(res.data.msg);\n\n          case 401:\n            _get(_getPrototypeOf(ApiResource.prototype), \"token\", this).clean(); // window.location.reload();\n\n\n            return Promise.reject(res.data.msg);\n\n          default:\n            return Promise.reject(res.data.msg);\n        }\n      }\n    }\n  }, {\n    key: \"resource\",\n    value: function resource(route) {\n      var _this2 = this;\n\n      var _resource = axios.create({\n        baseURL: this.baseUrl + route\n      }); // authentication\n\n\n      _resource.interceptors.request.use(function (config) {\n        config.headers.common['Authorization'] = _get(_getPrototypeOf(ApiResource.prototype), \"generate\", _this2).call(_this2, route + config.url, config.method, config.data);\n        return config;\n      }, function (error) {\n        return Promise.reject(error);\n      }); // handle reponse\n\n\n      _resource.interceptors.response.use(function (res) {\n        return _this2.handle(res);\n      }, function (error) {\n        return Promise.reject(error);\n      });\n\n      return _resource;\n    }\n  }]);\n\n  _inherits(ApiResource, _Signature);\n\n  return ApiResource;\n}(Signature);\n\nexport { ApiResource as default };",{"version":3,"sources":["/Users/zuber/Desktop/document/company/mobile_ts/src/interface/api/resource.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,SAAP,MAAsB,aAAtB;;IAGqB,W;;;AAEjB,uBAAa,OAAb,EAA8B,OAA9B,EAA+C,KAA/C,EAA6D,SAA7D,EAA+E;AAAA;;AAAA;;AAC3E,qFAAM,KAAN,EAAa,OAAb,EAAsB,SAAtB;AACA,UAAK,OAAL,GAAe,OAAf;AAF2E;AAG9E;;;;2BACO,G,EAAQ;AACZ,UAAI,IAAI,MAAJ,KAAe,GAAnB,EAAwB;AACpB,gBAAQ,IAAI,IAAJ,CAAS,IAAjB;AACI,eAAK,CAAL;AACI,mBAAO,IAAI,IAAJ,CAAS,MAAT,GAAkB,GAAlB,GAAwB,QAAQ,MAAR,CAAe,IAAI,IAAJ,CAAS,GAAxB,CAA/B;;AACJ,eAAK,GAAL;AACI,wEAAY,KAAZ,GADJ,CAEI;;;AACA,mBAAO,QAAQ,MAAR,CAAe,IAAI,IAAJ,CAAS,GAAxB,CAAP;;AACJ;AACI,mBAAO,QAAQ,MAAR,CAAe,IAAI,IAAJ,CAAS,GAAxB,CAAP;AARR;AAUH;AACJ;;;6BACS,K,EAAa;AAAA;;AACnB,UAAI,YAAY,MAAM,MAAN,CAAa;AACzB,iBAAS,KAAK,OAAL,GAAe;AADC,OAAb,CAAhB,CADmB,CAInB;;;AACA,gBAAU,YAAV,CAAuB,OAAvB,CAA+B,GAA/B,CAAmC,kBAAS;AACxC,eAAO,OAAP,CAAe,MAAf,CAAsB,eAAtB,kFAAwD,QAAQ,OAAO,GAAvE,EAA4E,OAAO,MAAnF,EAA2F,OAAO,IAAlG;AACA,eAAO,MAAP;AACH,OAHD,EAGG,iBAAQ;AACP,eAAO,QAAQ,MAAR,CAAe,KAAf,CAAP;AACH,OALD,EALmB,CAWnB;;;AACA,gBAAU,YAAV,CAAuB,QAAvB,CAAgC,GAAhC,CAAoC,eAAM;AACtC,eAAO,OAAK,MAAL,CAAY,GAAZ,CAAP;AACH,OAFD,EAEG,iBAAQ;AACP,eAAO,QAAQ,MAAR,CAAe,KAAf,CAAP;AACH,OAJD;;AAKA,aAAO,SAAP;AACH;;;;;;EAtCoC,S;;SAApB,W","sourcesContent":["import axios from 'axios'\nimport Signature from './signature'\nimport Token from './token'\n\nexport default class ApiResource extends Signature {\n    baseUrl: string;\n    constructor (baseUrl: string, version: string, token: Token, deployKey?: string) {\n        super(token, version, deployKey);\n        this.baseUrl = baseUrl;\n    }\n    handle (res: any) {\n        if (res.status === 200) {\n            switch (res.data.code) {\n                case 0:\n                    return res.data.result ? res : Promise.reject(res.data.msg)\n                case 401:\n                    super.token.clean();\n                    // window.location.reload();\n                    return Promise.reject(res.data.msg);\n                default:\n                    return Promise.reject(res.data.msg);\n            }\n        }\n    }\n    resource (route: string) {\n        let _resource = axios.create({\n            baseURL: this.baseUrl + route\n        })\n        // authentication\n        _resource.interceptors.request.use(config => {\n            config.headers.common['Authorization'] = super.generate(route + config.url, config.method, config.data);\n            return config;\n        }, error => {\n            return Promise.reject(error);\n        })\n        // handle reponse\n        _resource.interceptors.response.use(res => {\n            return this.handle(res);\n        }, error => {\n            return Promise.reject(error);\n        })\n        return _resource;\n    }\n}"],"sourceRoot":""}]}