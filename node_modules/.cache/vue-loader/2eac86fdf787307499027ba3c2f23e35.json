{"remainingRequest":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zuber/Desktop/document/company/mobile_ts/src/views/search/search_room.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/zuber/Desktop/document/company/mobile_ts/src/views/search/search_room.vue","mtime":1541669940547},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/less-loader/dist/cjs.js","mtime":1540785621795},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/cache-loader/dist/cjs.js","mtime":1540785597449},{"path":"/Users/zuber/Desktop/document/company/mobile_ts/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.fade-left-enter-active, .fade-left-leave-active {\n  transition: .2s;\n}\n.fade-left-enter, .fade-left-leave-to {\n  transform: translate(-100%);\n}\n.condition_wrap {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n  > div {\n    flex: 1;\n  }\n}\n.list_wrap {\n  width: 100%;\n  height: 95%;\n  .van-pull-refresh {\n    height: 100%;\n    overflow-y: scroll;\n  }\n}\n.banner {\n  width: 100%;\n  height: 40px;\n  box-sizing: border-box;\n  background-color: #FFF2BE;\n  padding: 0 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  p {\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    color: #CFA55A;\n  }\n}\n.safe_yellow_icon {\n  width: 23px;\n  height: 30px;\n  background: url('../../assets/Safe_yellow@2x.png') no-repeat center;\n  background-size: 50%;\n}\n.next_yellow_icon {\n  width: 12px;\n  height: 22px;\n  background: url('../../assets/Next_yellow@2x.png') no-repeat center;\n  background-size: 50%;\n}\n",{"version":3,"sources":["search_room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search_room.vue","sourceRoot":"src/views/search","sourcesContent":["<template>\n  <transition name=\"fade-left\" class=\"room_wrap\">\n    <div v-show=\"$route.name === 'room'\">\n      <div class=\"condition_wrap\">\n\n        <room-condition-locate\n        :bool=\"roomSearchByInput\"\n        :show=\"changeRoomSearchInputPopup\"\n        :region=\"roomCondition.region\"\n        />\n\n        <room-condition-video\n        :bool=\"roomSearchByVideo\"\n        :show=\"changeRoomSearchByVideoPopup\"\n        :hasVideo=\"roomCondition.hasVideo\"\n        :change=\"changeRoomHasVideo\"\n        :requestCallback=\"requestCallback\"\n        />\n\n        <room-condition-type\n        :bool=\"roomSearchByType\"\n        :show=\"changeRoomSearchByTypePopup\"\n        :type=\"roomCondition.type\"\n        :change=\"changeRoomType\"\n        :requestCallback=\"requestCallback\"\n        />\n\n        <room-condition-other\n        :bool=\"roomSearchByOther\"\n        :show=\"changeRoomSearchByOtherPopup\"\n        :other=\"roomCondition.other\"\n        :change=\"changeRoomOther\"\n        :requestCallback=\"requestCallback\"\n        />\n\n      </div>\n\n      <div class=\"list_wrap\">\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\n          <van-list\n            v-model=\"loading\"\n            :finished=\"finished\"\n            @load=\"onLoad\"\n          >\n            <div class=\"banner\">\n              <p>\n                <i class=\"safe_yellow_icon\"></i>zuber定金协议 / 租赁合同，方便安全有保障\n              </p>\n              <i class=\"next_yellow_icon\"></i>\n            </div>\n            <van-cell v-for=\"(item, i) in rentList\" :key=\"i\">\n              <room-list :roomItem=\"setRoomItem(item.room)\" />\n            </van-cell>\n          </van-list>\n        </van-pull-refresh>\n      </div>\n\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { State, Action } from 'vuex-class';\nimport { RoomModel } from '@/vuex/modules/search/search.model';\nimport RoomConditionLocate from '@/components/search/condition_locate.vue';\nimport RoomConditionVideo from '@/components/search/room_condition_video.vue';\nimport RoomConditionType from '@/components/search/room_condition_type.vue';\nimport RoomConditionOther from '@/components/search/room_condition_other.vue';\nimport RoomList from '@/components/search/room_list.vue';\n\n@Component({\n  components: {\n    RoomConditionLocate,\n    RoomConditionVideo,\n    RoomConditionType,\n    RoomConditionOther,\n    RoomList,\n  },\n})\nexport default class SearchRoom extends Vue {\n  private loading: boolean = false;\n  private finished: boolean = false;\n  private refreshing: boolean = false;\n\n  @Prop({default: false}) private roomSearchByInput!: boolean;\n  @Prop({default: {}}) private changeRoomSearchInputPopup!: any;\n\n  @Prop({default: false}) private roomSearchByVideo!: boolean;\n  @Prop({default: {}}) private changeRoomSearchByVideoPopup!: any;\n\n  @Prop({default: false}) private roomSearchByType!: boolean;\n  @Prop({default: {}}) private changeRoomSearchByTypePopup!: any;\n\n  @Prop({default: false}) private roomSearchByOther!: boolean;\n  @Prop({default: {}}) private changeRoomSearchByOtherPopup!: any;\n\n  @Prop({default: {}}) private roomCondition!: any;\n  @Prop({default: {}}) private changeRoomRegion!: any;\n  @Prop({default: {}}) private changeRoomHasVideo!: any;\n  @Prop({default: {}}) private changeRoomType!: any;\n  @Prop({default: {}}) private changeRoomOther!: any;\n\n  @State((state: any) => state.LocateModule.current_city) private currentCity!: string;\n  @State((state: any) => state.SearchModule.rent_sequence) private rentSequence!: string;\n  @State((state: any) => state.SearchModule.rent_list) private rentList!: RoomModel[];\n  @State((state: any) => state.SearchModule.has_next_rent_page) private hasNextRentPage!: boolean;\n\n  @Action('getBedList') private getBedList: any;\n\n  @Watch('hasNextRentPage') private change(): void {\n    this.finished = !this.hasNextRentPage;\n  }\n  @Watch('$route') private changeRoute(): void {\n    this.requestCallback();\n  }\n\n  // 重新计算房间信息\n  private setRoomItem(room: any): any {\n    if (room) {\n      let types: any = '';\n      if (room.biz) { // 如果为b端房源\n        types = room.biz_attr.beds[0].number;\n      } else { // 如果为c端房源\n        types = [\n          room.client_attr.beds[0].dateDetail,\n          room.client_attr.beds[0].sex === 0 ? '' : (room.client_attr.beds[0].sex === 1 ? '仅限男生' : '仅限女生'),\n          room.client_attr.beds[0].short_rent === 0 ? '' : '可短租',\n        ];\n      }\n      const dataInfo = {\n        biz: room.biz,\n        roomId: room.biz ? room.biz_attr.beds[0].room_id : room.client_attr.beds[0].room_id,\n        fullTitle: room.full_title,\n        roomTitle: room.title,\n        photo: room.biz ? room.biz_attr.beds[0].photo.src : room.client_attr.beds[0].photo.src,\n        types,\n        money: room.biz ? room.biz_attr.beds[0].money : room.client_attr.beds[0].money,\n        refreshTime: room.biz ? room.biz_attr.beds[0].refresh_time : room.client_attr.beds[0].refresh_time,\n        hasVideo: room.biz ? room.biz_attr.beds[0].has_video : room.client_attr.beds[0].has_video,\n      };\n      return dataInfo;\n    }\n  }\n  private onLoad(): void {\n    this.requestCallback(() => {\n      this.loading = false;\n    });\n  }\n  private onRefresh(): void {\n    this.requestCallback(() => {\n      this.refreshing = false;\n    });\n  }\n  // 刷新\n  private requestCallback(success?: any): void {\n    const data = {\n      city: this.currentCity,\n      cost1: this.roomCondition.other.money.min,\n      cost2: this.roomCondition.other.money.max,\n      has_short_rent: this.roomCondition.other.shortRent ? 1 : 0,\n      has_video: this.roomCondition.hasVideo ? 1 : 0,\n      region: this.roomCondition.region,\n      sex: this.roomCondition.other.gender,\n      type: (this.roomCondition.type).toString(),\n      room_type_affirm: (this.roomCondition.other.type).toString(),\n      sequence: this.rentSequence,\n      longitude: this.roomCondition.location.lng === -1 ? '' : this.roomCondition.location.lng,\n      latitude: this.roomCondition.location.lat === -1 ? '' : this.roomCondition.location.lat,\n    };\n    // 此处还需要优化 在sequence参数还有问题\n    this.getBedList({\n      data,\n      success,\n    });\n  }\n}\n</script>\n\n<style lang=\"less\">\n.fade-left-enter-active, .fade-left-leave-active {\n  transition: .2s;\n}\n.fade-left-enter, .fade-left-leave-to {\n  transform: translate(-100%);\n}\n.condition_wrap {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n  > div {\n    flex: 1;\n  }\n}\n.list_wrap {\n  width: 100%;\n  height: 95%;\n  .van-pull-refresh {\n    height: 100%;\n    overflow-y: scroll;\n  }\n}\n.banner {\n  width: 100%;\n  height: 40px;\n  box-sizing: border-box;\n  background-color: #FFF2BE;\n  padding: 0 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  p {\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    color: #CFA55A;\n  }\n}\n.safe_yellow_icon {\n  width: 23px;\n  height: 30px;\n  background: url('../../assets/Safe_yellow@2x.png') no-repeat center;\n  background-size: 50%;\n}\n.next_yellow_icon {\n  width: 12px;\n  height: 22px;\n  background: url('../../assets/Next_yellow@2x.png') no-repeat center;\n  background-size: 50%;\n}\n</style>\n"]}]}